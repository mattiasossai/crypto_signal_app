 name: Daily Liquidity Snapshot

-on:
-  schedule:
-    - cron: '0 0 * * *'  # 00:00 UTC täglich
+on:
+  # Täglicher Cron-Trigger
+  schedule:
+    - cron: '0 0 * * *'  # 00:00 UTC täglich
+  # Manueller Dispatch
+  workflow_dispatch:

 jobs:
   snapshot:
     runs-on: ubuntu-latest
     strategy:
       matrix:
         symbol: [BTCUSDT, ETHUSDT, BNBUSDT, SOLUSDT, XRPUSDT, ENAUSDT]
     steps:
       - name: Checkout
         uses: actions/checkout@v3
       - name: Install jq
         run: sudo apt-get update && sudo apt-get install -y jq
       - name: Capture Futures Depth
         run: |
           mkdir -p snapshots/futures/${{ matrix.symbol }}
           curl -s "https://fapi.binance.com/fapi/v1/depth?symbol=${{ matrix.symbol }}&limit=500" \
             | jq . > snapshots/futures/${{ matrix.symbol }}/$(date -I).json
       - name: Capture Spot Depth
         run: |
           mkdir -p snapshots/spot/${{ matrix.symbol }}
           curl -s "https://api.binance.com/api/v3/depth?symbol=${{ matrix.symbol }}&limit=500" \
             | jq . > snapshots/spot/${{ matrix.symbol }}/$(date -I).json
       - name: Commit & Push Snapshots
         run: |
           git config user.name "github-actions[bot]"
           git config user.email "github-actions[bot]@users.noreply.github.com"
           git add snapshots
           git commit -m "chore(snapshots): add liquidity ${{ matrix.symbol }} @ $(date -I) [skip ci]" || echo "No changes"
           git push
